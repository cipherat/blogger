<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Register Blog | Admin</title>
    <link rel="stylesheet" href="{{ url_for('static', path='/styles.css') }}"> 
    <style>
        .form-group { margin-bottom: 15px; }
        .form-group label { display: block; font-weight: bold; margin-bottom: 5px; }
        .form-group input[type="text"], .form-group input[type="date"], .form-group textarea, .form-group select {
            width: 100%;
            padding: 8px;
            border: 1px solid #ccc;
            box-sizing: border-box; 
            font-family: 'Ubuntu Mono', monospace;
        }
        .form-group textarea { height: 150px; }
        .form-error { color: #cc0000; margin-bottom: 15px; font-weight: bold; }
        .submit-button { 
            background-color: #1c1c1c; 
            color: #ffffff; 
            border: none; 
            padding: 10px 20px; 
            cursor: pointer; 
            font-family: 'Ubuntu Mono', monospace;
        }
    </style>
</head>
<body>

    <header>
        <div class="container">
            <h1>:: REGISTER BLOG ::</h1>
            <p>Enter all metadata to register a new post.</p>
        </div>
    </header>

    <div class="container">
        
        {% if errors.submission %}
            <div class="form-error">{{ errors.submission }}</div>
        {% endif %}

        <form method="POST" action="{{ url_for('register_submission') }}">
            
            <div class="form-group">
                <label for="title">Title:</label>
                <input type="text" id="title" name="title" value="{{ form_data.title | default('') }}" required>
            </div>
            
            <div class="form-group">
                <label for="category">Category:</label>
                <input type="text" id="category" name="category" value="{{ form_data.category | default('') }}" required>
            </div>

            <div class="form-group">
                <label for="published_at_str">Publication Date (YYYY-MM-DD):</label>
                <input type="date" id="published_at_str" name="published_at_str" value="{{ form_data.published_at_str | default('') }}" required>
                {% if errors.published_at %}<div class="form-error">{{ errors.published_at }}</div>{% endif %}
            </div>

            <div class="form-group">
                <label for="content_file">Content File Path/URL (.md):</label>
                <input type="text" id="content_file" name="content_file" value="{{ form_data.content_file | default('') }}" required>
            </div>
            
            <div class="form-group">
                <label for="keywords_csv">Keywords (Comma-separated list, e.g., linux, server, code):</label>
                <input type="text" id="keywords_csv" name="keywords_csv" value="{{ form_data.keywords | join(', ') | default('') }}" required>
            </div>

            <div class="form-group">
                <label for="references_csv">References (Comma-separated List of Paths/URLs):</label>
                <input type="text" id="references_csv" name="references_csv" value="{{ form_data.references | join(', ') | default('') }}">
            </div>
            
            <div class="form-group">
                <label for="state">State:</label>
                <select id="state" name="state">
                    {% for s in states %}
                        <option value="{{ s }}" {% if (form_data.state == s) or (loop.first and not form_data.state) %}selected{% endif %}>{{ s }}</option>
                    {% endfor %}
                </select>
            </div>
            
            <button type="submit" class="submit-button">Register Blog Post</button>
        </form>

    </div>
</body>
</html>
